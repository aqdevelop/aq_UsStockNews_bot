# 🚀 5분 안에 Railway 배포하기

## ⚡ 빠른 시작

### Step 1: 텔레그램 봇 만들기 (1분)
1. 텔레그램에서 `@BotFather` 검색
2. `/newbot` 입력
3. 봇 이름 입력 → Token 받기
4. 봇에게 `/start` 또는 아무 메시지 보내기

### Step 2: Chat ID 확인 (30초)

#### 개인 채팅
브라우저에서 열기 (YOUR_BOT_TOKEN 부분만 교체):
```
https://api.telegram.org/botYOUR_BOT_TOKEN/getUpdates
```

결과에서 `"chat":{"id":123456789` ← 이 숫자가 Chat ID

#### 그룹 채팅
1. 봇을 그룹에 추가
2. 그룹에서 봇에게 `/start` 메시지
3. 위 URL 접속
4. 그룹 Chat ID는 `-100`으로 시작하는 음수 (예: `-1001234567890`)

#### 여러 채팅방
콤마로 구분 (공백 없이):
```
-1001234567890,-1009876543210,-1008765432109
```

### Step 3: OpenAI API 키 (2분)
1. https://platform.openai.com/api-keys 접속
2. "Create new secret key" 클릭
3. 키 복사 (sk-로 시작)

### Step 4: Railway 배포 (2분)
1. https://railway.app 접속 → GitHub 로그인
2. "New Project" → "Empty Project"
3. "GitHub Repo" → 업로드한 레포 선택
4. "Variables" 탭 클릭 → 아래 추가:
   ```
   TELEGRAM_BOT_TOKEN = 여기에_봇_토큰
   TELEGRAM_CHAT_IDS = 여기에_채팅ID (콤마로 구분)
   OPENAI_API_KEY = 여기에_sk_키
   ```
   
   예시:
   ```
   TELEGRAM_CHAT_IDS = -1001234567890,-1009876543210
   ```

5. 자동 배포 시작!

### Step 5: 즉시 확인 (배포 후 1-2분)

Railway는 배포 직후 **자동으로 최근 12시간 뉴스를 전송**합니다!

**Logs 탭에서 확인**:
```
🚀 해외주식 뉴스 12시간 요약 시작 (GPT-4o-mini)
📰 뉴스 수집 시작...
📢 전송 대상 채팅방: 2개
📤 [1/2] 채팅방 -1001234567890에 전송 중...
✅ 채팅방 -1001234567890: 메시지 1/1 전송 성공
[5초 대기]
📤 [2/2] 채팅방 -1009876543210에 전송 중...
✅ 채팅방 -1009876543210: 메시지 1/1 전송 성공
📊 전송 결과: 성공 2개, 실패 0개

🤖 해외주식 뉴스 봇 스케줄러 시작
✅ 스케줄 등록 완료. 대기 중...
```

**텔레그램에서 확인**:
- 1-2분 내 모든 채팅방에 뉴스 도착
- 여러 채팅방일 경우 5초 간격으로 순차 전송

### Step 6: 정기 전송 시작
- 테스트 완료 후 자동으로 스케줄러 시작
- 다음 발송 시간 (한국시간 KST 고정):
  - **매일 오전 8시**: 모닝브리프
  - **매일 오후 10시**: 이브닝브리프
  - **일요일**: 주간 핫 TOP 10 추가
  - **매월 1일**: 월간 핫 TOP 10 추가

완료! 🎉

## ⏱️ 채팅방별 전송 시간

| 채팅방 개수 | 예상 전송 시간 |
|------------|--------------|
| 1개 | ~2초 |
| 2개 | ~7초 |
| 3개 | ~12초 |
| 5개 | ~22초 |

> 각 채팅방 간 5초 간격으로 안정적 전송

## ❓ 문제 해결

### 배포 후 메시지가 안 옴
- Bot Token 재확인
- `TELEGRAM_CHAT_IDS` 확인 (CHAT_ID가 아님!)
- Chat ID가 콤마로만 구분되었는지 확인 (공백 없이)
- 봇이 모든 채팅방에 추가되었는지 확인

### 일부 채팅방만 전송됨
- Railway Logs에서 실패한 채팅방 확인
- 해당 채팅방에 봇 권한 확인
- Chat ID 재확인 (getUpdates API)

### OpenAI 오류
- API 키 확인
- 크레딧 잔액 확인

### Railway 무료 한도
- 월 $5 크레딧 무료
- 이 봇은 월 $1-2 정도 사용
- 여러 채팅방 사용 시 약간 증가 (무시할 수준)

## 📞 문의
contact@aqresearch.com
